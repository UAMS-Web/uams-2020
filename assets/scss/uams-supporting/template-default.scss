body.page-template-default,
body.page-template-modules,
body.post-template-default,
body.archive,
body.error404,
body.search,
body.advert-template-default,
body.blog,
body.tshowcase-template-default,
body.kb-template-default,
body.sfwd-courses-template-default {
    .archive-description,
    .entry {
        .entry-header {
            &:last-child {
                .entry-title,
                .archive-title {
                    margin-bottom: 0;
                }
            }
        }

        .entry-title,
        .archive-title {
            @include pagetitle();
        }

        .archive-title {
            &:last-child {
                margin-bottom: 0;
            }
        }
    }
}

body.page-template-modules {
    .archive-description,
    .entry {
        .entry-title,
        .archive-title {
            padding-top: $uams-module-padding-mobile;

            @include media-breakpoint-up(sm) {
                padding-top: $uams-module-padding;
            }
        }
    }
}

body.page-template-default,
body.post-template-default,
body.archive,
body.error404,
body.advert-template-default,
body.blog,
body.tshowcase-template-default,
body.kb-template-default,
body.sfwd-courses-template-default {
    .entry,
    .entry-comments,
    #respond,
    .archive-description,
    .archive-pagination {
        padding: $uams-module-padding-mobile;
        margin-bottom: 0;
        line-height: inherit;

        @include media-breakpoint-up(sm) {
            padding: $uams-module-padding;
        }
    }

    .entry,
    .archive-description {
        .entry-meta,
        .entry-content,
        .entry-footer {
            max-width: 100%;
            margin-left: auto;
            margin-right: auto;
        }

        .entry-meta {
            color: $gray-600;
            font-size: 1rem;
        }

        .entry-header .entry-meta {
            margin-bottom: $font-size-base;
            text-align: left;
            width: $content-width;
        }

        .entry-content,
        .entry-footer {
            width: $content-width;
            text-align: left;
        }

        .entry-content {
            //.alignnone,
            //figure[class="wp-block-image"] {}
        }

        .entry-footer {
            margin-top: $uams-module-padding-mobile;
            padding-top: $uams-module-padding-mobile;
            border-top: 1px solid $body-bg-border;

            .entry-meta {
                width: 100%;
                text-align: inherit;
                margin-bottom: 0.25em;

                &:last-child {
                    margin-bottom: 0;
                }
            }
        }

        .wp-caption-text,
        figcaption {
            .photo-credit {
                font-style: italic;
            }
        }
    }

    .entry-comments {
        @extend .bg-gray;

        > h3,
        .comment-list {
            width: $content-width;
            max-width: 100%;
            margin-left: auto;
            margin-right: auto;
        }

        .comment {
            .comment-header,
            .comment-reply {
                background-color: transparent;
            }

            .comment-header {
                display: flex;
                flex-flow: row wrap;
                justify-content: flex-start;

                .comment-author {
                    width: 100%;
                    margin-bottom: 0.5em;
                }

                .comment-meta,
                .comment-edit-link {
                    white-space: nowrap;
                    font-size: 1rem;
                }

                .comment-meta {
                    padding-right: 1em;
                }
                .comment-edit-link {
                }
            }
        }

        + #respond {
            padding-top: 0;

            @include media-breakpoint-up(sm) {
                padding-top: 0;
            }
        }
    }

    #respond {
        @extend .bg-gray;

        #reply-title,
        #commentform {
            width: $content-width;
            max-width: 100%;
            margin-left: auto;
            margin-right: auto;
        }

        #reply-title {
            text-align: left;
        }

        .must-log-in {
            @extend .content-width;
        }

        .form-submit {
            #submit {
                @extend .btn-primary;
            }
        }
    }
}

body.archive {
    .archive-description {
        + .entry {
            padding-top: 0;
        }
    }

    .entry {
        margin-bottom: 0;

        &:last-of-type {
            border-bottom: 0;
        }

        .entry-title {
            @include font-size($h2-font-size);

            &:after {
                background-color: $body-bg-border;
            }
        }

        .entry-content {
            h1 {
                @extend .h2;
            }

            h2 {
                @extend .h3;
            }

            h3 {
                @extend .h4;
            }

            h4 {
                @extend .h5;
            }

            h5 {
                @extend .h6;
            }
        }
    }

    .archive-pagination {
        background-color: $body-bg-banded;

        ul {
            margin: 0 auto;
        }
    }
}

body.search {
    .entry {
        border-bottom: 0;
        padding-bottom: 0;
        margin-bottom: 0;

        .entry-header {
            padding-top: $uams-module-padding-mobile;
            padding-right: $uams-module-padding-mobile;
            padding-left: $uams-module-padding-mobile;
            margin-bottom: 0;

            @include media-breakpoint-up(sm) {
                padding-top: $uams-module-padding;
                padding-right: $uams-module-padding;
                padding-left: $uams-module-padding;
            }
        }
    }
}

.alignnone,
.aligncenter,
.alignleft,
.alignright,
.alignwide,
.alignfull,
figure[class="wp-block-image"],
figure[class="wp-block-image size-large"],
.wp-block-image .alignnone,
.wp-block-image .aligncenter,
.wp-block-image .alignleft,
.wp-block-image .alignright,
.wp-block-image .alignwide,
.wp-block-image .alignfull,
.wp-block-image figure[class="wp-block-image"],
.wp-block-image figure[class="wp-block-image size-large"] {
    margin-top: $page-title-margin-bottom-mobile;
    margin-bottom: $page-title-margin-bottom-mobile;

    .wp-caption-text,
    figcaption {
        display: block;
        max-width: $figure-caption-font-size * $line-length-max;
        margin-top: 1em;
        margin-bottom: 0;
        font-size: $figure-caption-font-size;
        color: $figure-caption-color;
    }
}

.alignnone,
.aligncenter,
.alignwide,
.alignfull,
figure[class="wp-block-image"],
figure[class="wp-block-image size-large"],
.wp-block-image .alignnone,
.wp-block-image .aligncenter,
.wp-block-image .alignwide,
.wp-block-image .alignfull,
.wp-block-image figure[class="wp-block-image"],
.wp-block-image figure[class="wp-block-image size-large"] {
    margin-right: 0;
    margin-left: 0;
}

.alignnone,
.alignleft,
.alignright,
figure[class="wp-block-image"],
figure[class="wp-block-image size-large"],
.wp-block-image .alignnone,
.wp-block-image .alignleft,
.wp-block-image .alignright,
.wp-block-image figure[class="wp-block-image"],
.wp-block-image figure[class="wp-block-image size-large"] {
    .wp-caption-text,
    figcaption {
        text-align: left;
    }
}

.aligncenter,
.alignwide,
.alignfull,
figure[class="wp-block-image size-large"],
.wp-block-image .aligncenter,
.wp-block-image .alignwide,
.wp-block-image .alignfull,
.wp-block-image figure[class="wp-block-image size-large"] {
    .wp-caption-text,
    figcaption {
        text-align: center;
        margin-left: auto;
        margin-right: auto;
    }
}

.aligncenter,
.wp-block-image .aligncenter,
figure[class="wp-block-image size-large"],
.wp-block-image figure[class="wp-block-image size-large"] {
    width: 100% !important;
}

.alignwide,
.wp-block-image .alignwide {
    @include media-breakpoint-up(md) {
        @include alignwide($alignwide-ratio-md);
    }
    @include media-breakpoint-up(lg) {
        @include alignwide($alignwide-ratio-lg);
    }
}

body.page-template-default {
    .alignfull,
    .wp-block-image .alignfull {
        width: 100vw;
        max-width: 100vw;
        margin-left: calc(50% - 50vw);
        margin-right: calc(50% - 50vw);
    }
}

.alignleft,
.alignright,
.wp-block-image .alignleft,
.wp-block-image .alignright {
    display: block;
    //width: 100% !important;
    margin-right: auto;
    margin-left: auto;
    float: none;

    @include media-breakpoint-up(xs) {
        margin: 0 0 1em 0;
        max-width: 240px !important;
        max-width: calc((#{$breakpoint-xs} - #{$uams-module-padding-mobile} * 3) / 2) !important;
    }

    @include media-breakpoint-up(sm) {
        max-width: 299px !important;
        max-width: calc((#{$content-width} - #{$page-title-margin-bottom-mobile}) / 2) !important;
    }

    &.small {
        @include media-breakpoint-up(md) {
            max-width: 299px * 0.75 !important;
            max-width: calc((#{$content-width} - #{$page-title-margin-bottom-mobile}) / 2 * 0.75) !important;
        }
    }

    img,
    .wp-caption-text,
    figcaption {
        @include media-breakpoint-only(xxs) {
            margin-right: auto;
            margin-left: auto;
        }
    }

    .wp-caption-text,
    figcaption {
        @include media-breakpoint-only(xxs) {
            text-align: center;
        }
    }
}

.alignleft,
.wp-block-image .alignleft {
    @include media-breakpoint-up(xs) {
        margin-right: $page-title-margin-bottom-mobile;
        float: left;
    }
}

.alignright,
.wp-block-image .alignright {
    @include media-breakpoint-up(xs) {
        margin-left: $page-title-margin-bottom-mobile;
        float: right;
    }
}

.wp-block-image + .wp-block-image {
    .alignleft {
        clear: left;
    }
    .alignright {
        clear: right;
    }
}

.wp-block-image {
    &:first-child {
        > .alignnone,
        > .aligncenter,
        > .alignleft,
        > .alignright,
        > .alignwide,
        > .alignfull,
        > figure[class="wp-block-image"],
        > figure[class="wp-block-image size-large"] {
            margin-top: 0;
        }
    }
    &:last-child {
        > .alignnone,
        > .aligncenter,
        > .alignleft,
        > .alignright,
        > .alignwide,
        > .alignfull,
        > figure[class="wp-block-image"],
        > figure[class="wp-block-image size-large"] {
            margin-bottom: 0;
        }
    }
}

:not(.wp-block-image) {
    > .alignnone,
    > .aligncenter,
    > .alignleft,
    > .alignright,
    > .alignwide,
    > .alignfull,
    > figure[class="wp-block-image"],
    > figure[class="wp-block-image size-large"] {
        &:first-child {
            margin-bottom: 0;
        }
        &:last-child {
            margin-bottom: 0;
        }
    }
}
